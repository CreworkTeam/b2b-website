---
// component imports
const allBlogs = await Astro.glob('../blog/**/*.md');
import MainLayout from '../../layouts/main-layout.astro';
import Section from '../../components/section.astro';
import FeaturedCarousel from '@/components/blog/features-carousel';
import BlogCard from '@/components/blog/blog-card';
import { Input } from '@/components/ui/input';
import SelectTag from '@/components/blog/select-tags';
import { Image } from 'astro:assets';
---

<MainLayout title="My Blog">
  <Section>
    <div class="flex flex-col justify-between gap-8 md:flex-row md:items-end">
      <div class="flex-[3] space-y-2 text-center md:text-start">
        <h1 class="text-4xl font-semibold">Builder's Guide Blog</h1>
        <p class="font-medium text-[#686868]">
          No bullshit insights on how to improve conversions and build better products to make more
          money
        </p>
      </div>
      <div class="flex flex-[2] flex-col items-center justify-end gap-1 md:items-end">
        <p class="text-lg font-medium">Subscribe to our newsletter</p>
        <div class="relative flex flex-1 rounded-md border bg-[#F4F4F4] px-2">
          <Input
            type="text"
            placeholder="Search"
            className="flex-1 border-0 shadow-none focus-visible:ring-0"
          />
          <div class="flex cursor-pointer items-center pr-2 text-sm font-medium">Subscribe</div>
        </div>
      </div>
    </div>
  </Section>
  <Section className="space-y-6">
    <div class="space-y-3">
      <h4 class="text-black">Featured</h4>
      <div>
        <FeaturedCarousel
          blogs={allBlogs.map(({ url, frontmatter }) => ({ url, ...frontmatter }))}
          client:load
        />
      </div>
    </div>
    <div>
      <div class="flex flex-col justify-between gap-2 md:flex-row">
        <h4 class="text-black">All Articles</h4>
        <div class="flex gap-2">
          <div class="relative flex flex-1 items-center rounded-md border bg-[#F4F4F4]">
            <Input
              placeholder="Search"
              className="flex-1 border-0 shadow-none focus-visible:ring-0"
            />
            <Image
              width={6}
              height={6}
              src="/icons/search.svg"
              alt="search"
              class="h-full w-6 cursor-pointer rounded-r-md object-contain pr-2"
            />
          </div>
          <SelectTag client:load />
        </div>
      </div>
      <div class="flex flex-wrap">
        {
          allBlogs.map(({ url, frontmatter }, index) => (
            <div
              class:list={[
                'w-full py-4 md:w-1/2',
                {
                  'md:pr-2': index % 2 === 0,
                  'md:pl-2': index % 2 !== 0,
                },
              ]}
            >
              <BlogCard {...frontmatter} url={url} client:load />
            </div>
          ))
        }
      </div>
    </div>
    <button class="btn mx-auto block px-14"> View More </button>
  </Section>
</MainLayout>
